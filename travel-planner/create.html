<!DOCTYPE html>
<html>
<head>
  <title>Create Spot</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
  <script src="firebase.js"></script>
</head>
<body>
  <h2>Create Spot</h2>
  <form id="spotForm">
    <input type="text" id="name" placeholder="Spot Name" required>
    <input type="number" id="cost" placeholder="Cost" required>
    <input type="number" id="people" placeholder="People Required" required>
    <input type="text" id="points" placeholder="Points to Visit" required>
    <input type="date" id="startDate" required>
    <input type="date" id="endDate" required>
    <input type="text" id="transport" placeholder="Mode of Transport" required>
    <input type="file" id="image" required>
    <button type="submit">Save Spot</button>
  </form>

  <script>
    document.getElementById("spotForm").addEventListener("submit", e => {
      e.preventDefault();
      const name = document.getElementById("name").value;
      const cost = document.getElementById("cost").value;
      const people = document.getElementById("people").value;
      const points = document.getElementById("points").value;
      const startDate = document.getElementById("startDate").value;
      const endDate = document.getElementById("endDate").value;
      const transport = document.getElementById("transport").value;
      const imageFile = document.getElementById("image").files[0];

      const storageRef = storage.ref("spots/" + imageFile.name);
      storageRef.put(imageFile).then(() => {
        storageRef.getDownloadURL().then(url => {
          db.collection("spots").add({
            name, cost, people, points, startDate, endDate, transport,
            imageURL: url
          }).then(() => {
            alert("Spot Added!");
            window.location.href = "index.html";
          });
        });
      });
    });
  </script>
</body>
</html>
